{"ast":null,"code":"var AWS = require('./core');\nvar SequentialExecutor = require('./sequential_executor');\nvar DISCOVER_ENDPOINT = require('./discover_endpoint').discoverEndpoint;\n/**\n * The namespace used to register global event listeners for request building\n * and sending.\n */\nAWS.EventListeners = {\n  /**\n   * @!attribute VALIDATE_CREDENTIALS\n   *   A request listener that validates whether the request is being\n   *   sent with credentials.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating credentials\n   *     var listener = AWS.EventListeners.Core.VALIDATE_CREDENTIALS;\n   *     request.removeListener('validate', listener);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute VALIDATE_REGION\n   *   A request listener that validates whether the region is set\n   *   for a request.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating region configuration\n   *     var listener = AWS.EventListeners.Core.VALIDATE_REGION;\n   *     request.removeListener('validate', listener);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute VALIDATE_PARAMETERS\n   *   A request listener that validates input parameters in a request.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating parameters\n   *     var listener = AWS.EventListeners.Core.VALIDATE_PARAMETERS;\n   *     request.removeListener('validate', listener);\n   *   @example Disable parameter validation globally\n   *     AWS.EventListeners.Core.removeListener('validate',\n   *       AWS.EventListeners.Core.VALIDATE_REGION);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute SEND\n   *   A request listener that initiates the HTTP connection for a\n   *   request being sent. Handles the {AWS.Request~send 'send' Request event}\n   *   @example Replacing the HTTP handler\n   *     var listener = AWS.EventListeners.Core.SEND;\n   *     request.removeListener('send', listener);\n   *     request.on('send', function(response) {\n   *       customHandler.send(response);\n   *     });\n   *   @return [Function]\n   *   @readonly\n   * @!attribute HTTP_DATA\n   *   A request listener that reads data from the HTTP connection in order\n   *   to build the response data.\n   *   Handles the {AWS.Request~httpData 'httpData' Request event}.\n   *   Remove this handler if you are overriding the 'httpData' event and\n   *   do not want extra data processing and buffering overhead.\n   *   @example Disabling default data processing\n   *     var listener = AWS.EventListeners.Core.HTTP_DATA;\n   *     request.removeListener('httpData', listener);\n   *   @return [Function]\n   *   @readonly\n   */\n  Core: {} /* doc hack */\n};\n\n/**\n * @api private\n */\nfunction getOperationAuthtype(req) {\n  if (!req.service.api.operations) {\n    return '';\n  }\n  var operation = req.service.api.operations[req.operation];\n  return operation ? operation.authtype : '';\n}\nAWS.EventListeners = {\n  Core: new SequentialExecutor().addNamedListeners(function (add, addAsync) {\n    addAsync('VALIDATE_CREDENTIALS', 'validate', function VALIDATE_CREDENTIALS(req, done) {\n      if (!req.service.api.signatureVersion) return done(); // none\n      req.service.config.getCredentials(function (err) {\n        if (err) {\n          req.response.error = AWS.util.error(err, {\n            code: 'CredentialsError',\n            message: 'Missing credentials in config'\n          });\n        }\n        done();\n      });\n    });\n    add('VALIDATE_REGION', 'validate', function VALIDATE_REGION(req) {\n      if (!req.service.config.region && !req.service.isGlobalEndpoint) {\n        req.response.error = AWS.util.error(new Error(), {\n          code: 'ConfigError',\n          message: 'Missing region in config'\n        });\n      }\n    });\n    add('BUILD_IDEMPOTENCY_TOKENS', 'validate', function BUILD_IDEMPOTENCY_TOKENS(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      if (!operation) {\n        return;\n      }\n      var idempotentMembers = operation.idempotentMembers;\n      if (!idempotentMembers.length) {\n        return;\n      }\n      // creates a copy of params so user's param object isn't mutated\n      var params = AWS.util.copy(req.params);\n      for (var i = 0, iLen = idempotentMembers.length; i < iLen; i++) {\n        if (!params[idempotentMembers[i]]) {\n          // add the member\n          params[idempotentMembers[i]] = AWS.util.uuid.v4();\n        }\n      }\n      req.params = params;\n    });\n    add('VALIDATE_PARAMETERS', 'validate', function VALIDATE_PARAMETERS(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var rules = req.service.api.operations[req.operation].input;\n      var validation = req.service.config.paramValidation;\n      new AWS.ParamValidator(validation).validate(rules, req.params);\n    });\n    addAsync('COMPUTE_SHA256', 'afterBuild', function COMPUTE_SHA256(req, done) {\n      req.haltHandlersOnError();\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      var authtype = operation ? operation.authtype : '';\n      if (!req.service.api.signatureVersion && !authtype) return done(); // none\n      if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n        var body = req.httpRequest.body || '';\n        if (authtype.indexOf('unsigned-body') >= 0) {\n          req.httpRequest.headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n          return done();\n        }\n        AWS.util.computeSha256(body, function (err, sha) {\n          if (err) {\n            done(err);\n          } else {\n            req.httpRequest.headers['X-Amz-Content-Sha256'] = sha;\n            done();\n          }\n        });\n      } else {\n        done();\n      }\n    });\n    add('SET_CONTENT_LENGTH', 'afterBuild', function SET_CONTENT_LENGTH(req) {\n      var authtype = getOperationAuthtype(req);\n      var payloadMember = AWS.util.getRequestPayloadShape(req);\n      if (req.httpRequest.headers['Content-Length'] === undefined) {\n        try {\n          var length = AWS.util.string.byteLength(req.httpRequest.body);\n          req.httpRequest.headers['Content-Length'] = length;\n        } catch (err) {\n          if (payloadMember && payloadMember.isStreaming) {\n            if (payloadMember.requiresLength) {\n              //streaming payload requires length(s3, glacier)\n              throw err;\n            } else if (authtype.indexOf('unsigned-body') >= 0) {\n              //unbounded streaming payload(lex, mediastore)\n              req.httpRequest.headers['Transfer-Encoding'] = 'chunked';\n              return;\n            } else {\n              throw err;\n            }\n          }\n          throw err;\n        }\n      }\n    });\n    add('SET_HTTP_HOST', 'afterBuild', function SET_HTTP_HOST(req) {\n      req.httpRequest.headers['Host'] = req.httpRequest.endpoint.host;\n    });\n    add('RESTART', 'restart', function RESTART() {\n      var err = this.response.error;\n      if (!err || !err.retryable) return;\n      this.httpRequest = new AWS.HttpRequest(this.service.endpoint, this.service.region);\n      if (this.response.retryCount < this.service.config.maxRetries) {\n        this.response.retryCount++;\n      } else {\n        this.response.error = null;\n      }\n    });\n    var addToHead = true;\n    addAsync('DISCOVER_ENDPOINT', 'sign', DISCOVER_ENDPOINT, addToHead);\n    addAsync('SIGN', 'sign', function SIGN(req, done) {\n      var service = req.service;\n      var operations = req.service.api.operations || {};\n      var operation = operations[req.operation];\n      var authtype = operation ? operation.authtype : '';\n      if (!service.api.signatureVersion && !authtype) return done(); // none\n\n      service.config.getCredentials(function (err, credentials) {\n        if (err) {\n          req.response.error = err;\n          return done();\n        }\n        try {\n          var date = service.getSkewCorrectedDate();\n          var SignerClass = service.getSignerClass(req);\n          var signer = new SignerClass(req.httpRequest, service.api.signingName || service.api.endpointPrefix, {\n            signatureCache: service.config.signatureCache,\n            operation: operation,\n            signatureVersion: service.api.signatureVersion\n          });\n          signer.setServiceClientId(service._clientId);\n\n          // clear old authorization headers\n          delete req.httpRequest.headers['Authorization'];\n          delete req.httpRequest.headers['Date'];\n          delete req.httpRequest.headers['X-Amz-Date'];\n\n          // add new authorization\n          signer.addAuthorization(credentials, date);\n          req.signedAt = date;\n        } catch (e) {\n          req.response.error = e;\n        }\n        done();\n      });\n    });\n    add('VALIDATE_RESPONSE', 'validateResponse', function VALIDATE_RESPONSE(resp) {\n      if (this.service.successfulResponse(resp, this)) {\n        resp.data = {};\n        resp.error = null;\n      } else {\n        resp.data = null;\n        resp.error = AWS.util.error(new Error(), {\n          code: 'UnknownError',\n          message: 'An unknown error occurred.'\n        });\n      }\n    });\n    addAsync('SEND', 'send', function SEND(resp, done) {\n      resp.httpResponse._abortCallback = done;\n      resp.error = null;\n      resp.data = null;\n      function callback(httpResp) {\n        resp.httpResponse.stream = httpResp;\n        var stream = resp.request.httpRequest.stream;\n        var service = resp.request.service;\n        var api = service.api;\n        var operationName = resp.request.operation;\n        var operation = api.operations[operationName] || {};\n        httpResp.on('headers', function onHeaders(statusCode, headers, statusMessage) {\n          resp.request.emit('httpHeaders', [statusCode, headers, resp, statusMessage]);\n          if (!resp.httpResponse.streaming) {\n            if (AWS.HttpClient.streamsApiVersion === 2) {\n              // streams2 API check\n              // if we detect event streams, we're going to have to\n              // return the stream immediately\n              if (operation.hasEventOutput && service.successfulResponse(resp)) {\n                // skip reading the IncomingStream\n                resp.request.emit('httpDone');\n                done();\n                return;\n              }\n              httpResp.on('readable', function onReadable() {\n                var data = httpResp.read();\n                if (data !== null) {\n                  resp.request.emit('httpData', [data, resp]);\n                }\n              });\n            } else {\n              // legacy streams API\n              httpResp.on('data', function onData(data) {\n                resp.request.emit('httpData', [data, resp]);\n              });\n            }\n          }\n        });\n        httpResp.on('end', function onEnd() {\n          if (!stream || !stream.didCallback) {\n            if (AWS.HttpClient.streamsApiVersion === 2 && operation.hasEventOutput && service.successfulResponse(resp)) {\n              // don't concatenate response chunks when streaming event stream data when response is successful\n              return;\n            }\n            resp.request.emit('httpDone');\n            done();\n          }\n        });\n      }\n      function progress(httpResp) {\n        httpResp.on('sendProgress', function onSendProgress(value) {\n          resp.request.emit('httpUploadProgress', [value, resp]);\n        });\n        httpResp.on('receiveProgress', function onReceiveProgress(value) {\n          resp.request.emit('httpDownloadProgress', [value, resp]);\n        });\n      }\n      function error(err) {\n        if (err.code !== 'RequestAbortedError') {\n          var errCode = err.code === 'TimeoutError' ? err.code : 'NetworkingError';\n          err = AWS.util.error(err, {\n            code: errCode,\n            region: resp.request.httpRequest.region,\n            hostname: resp.request.httpRequest.endpoint.hostname,\n            retryable: true\n          });\n        }\n        resp.error = err;\n        resp.request.emit('httpError', [resp.error, resp], function () {\n          done();\n        });\n      }\n      function executeSend() {\n        var http = AWS.HttpClient.getInstance();\n        var httpOptions = resp.request.service.config.httpOptions || {};\n        try {\n          var stream = http.handleRequest(resp.request.httpRequest, httpOptions, callback, error);\n          progress(stream);\n        } catch (err) {\n          error(err);\n        }\n      }\n      var timeDiff = (resp.request.service.getSkewCorrectedDate() - this.signedAt) / 1000;\n      if (timeDiff >= 60 * 10) {\n        // if we signed 10min ago, re-sign\n        this.emit('sign', [this], function (err) {\n          if (err) done(err);else executeSend();\n        });\n      } else {\n        executeSend();\n      }\n    });\n    add('HTTP_HEADERS', 'httpHeaders', function HTTP_HEADERS(statusCode, headers, resp, statusMessage) {\n      resp.httpResponse.statusCode = statusCode;\n      resp.httpResponse.statusMessage = statusMessage;\n      resp.httpResponse.headers = headers;\n      resp.httpResponse.body = AWS.util.buffer.toBuffer('');\n      resp.httpResponse.buffers = [];\n      resp.httpResponse.numBytes = 0;\n      var dateHeader = headers.date || headers.Date;\n      var service = resp.request.service;\n      if (dateHeader) {\n        var serverTime = Date.parse(dateHeader);\n        if (service.config.correctClockSkew && service.isClockSkewed(serverTime)) {\n          service.applyClockOffset(serverTime);\n        }\n      }\n    });\n    add('HTTP_DATA', 'httpData', function HTTP_DATA(chunk, resp) {\n      if (chunk) {\n        if (AWS.util.isNode()) {\n          resp.httpResponse.numBytes += chunk.length;\n          var total = resp.httpResponse.headers['content-length'];\n          var progress = {\n            loaded: resp.httpResponse.numBytes,\n            total: total\n          };\n          resp.request.emit('httpDownloadProgress', [progress, resp]);\n        }\n        resp.httpResponse.buffers.push(AWS.util.buffer.toBuffer(chunk));\n      }\n    });\n    add('HTTP_DONE', 'httpDone', function HTTP_DONE(resp) {\n      // convert buffers array into single buffer\n      if (resp.httpResponse.buffers && resp.httpResponse.buffers.length > 0) {\n        var body = AWS.util.buffer.concat(resp.httpResponse.buffers);\n        resp.httpResponse.body = body;\n      }\n      delete resp.httpResponse.numBytes;\n      delete resp.httpResponse.buffers;\n    });\n    add('FINALIZE_ERROR', 'retry', function FINALIZE_ERROR(resp) {\n      if (resp.httpResponse.statusCode) {\n        resp.error.statusCode = resp.httpResponse.statusCode;\n        if (resp.error.retryable === undefined) {\n          resp.error.retryable = this.service.retryableError(resp.error, this);\n        }\n      }\n    });\n    add('INVALIDATE_CREDENTIALS', 'retry', function INVALIDATE_CREDENTIALS(resp) {\n      if (!resp.error) return;\n      switch (resp.error.code) {\n        case 'RequestExpired': // EC2 only\n        case 'ExpiredTokenException':\n        case 'ExpiredToken':\n          resp.error.retryable = true;\n          resp.request.service.config.credentials.expired = true;\n      }\n    });\n    add('EXPIRED_SIGNATURE', 'retry', function EXPIRED_SIGNATURE(resp) {\n      var err = resp.error;\n      if (!err) return;\n      if (typeof err.code === 'string' && typeof err.message === 'string') {\n        if (err.code.match(/Signature/) && err.message.match(/expired/)) {\n          resp.error.retryable = true;\n        }\n      }\n    });\n    add('CLOCK_SKEWED', 'retry', function CLOCK_SKEWED(resp) {\n      if (!resp.error) return;\n      if (this.service.clockSkewError(resp.error) && this.service.config.correctClockSkew) {\n        resp.error.retryable = true;\n      }\n    });\n    add('REDIRECT', 'retry', function REDIRECT(resp) {\n      if (resp.error && resp.error.statusCode >= 300 && resp.error.statusCode < 400 && resp.httpResponse.headers['location']) {\n        this.httpRequest.endpoint = new AWS.Endpoint(resp.httpResponse.headers['location']);\n        this.httpRequest.headers['Host'] = this.httpRequest.endpoint.host;\n        resp.error.redirect = true;\n        resp.error.retryable = true;\n      }\n    });\n    add('RETRY_CHECK', 'retry', function RETRY_CHECK(resp) {\n      if (resp.error) {\n        if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n          resp.error.retryDelay = 0;\n        } else if (resp.retryCount < resp.maxRetries) {\n          resp.error.retryDelay = this.service.retryDelays(resp.retryCount) || 0;\n        }\n      }\n    });\n    addAsync('RESET_RETRY_STATE', 'afterRetry', function RESET_RETRY_STATE(resp, done) {\n      var delay,\n        willRetry = false;\n      if (resp.error) {\n        delay = resp.error.retryDelay || 0;\n        if (resp.error.retryable && resp.retryCount < resp.maxRetries) {\n          resp.retryCount++;\n          willRetry = true;\n        } else if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n          resp.redirectCount++;\n          willRetry = true;\n        }\n      }\n      if (willRetry) {\n        resp.error = null;\n        setTimeout(done, delay);\n      } else {\n        done();\n      }\n    });\n  }),\n  CorePost: new SequentialExecutor().addNamedListeners(function (add) {\n    add('EXTRACT_REQUEST_ID', 'extractData', AWS.util.extractRequestId);\n    add('EXTRACT_REQUEST_ID', 'extractError', AWS.util.extractRequestId);\n    add('ENOTFOUND_ERROR', 'httpError', function ENOTFOUND_ERROR(err) {\n      if (err.code === 'NetworkingError' && err.errno === 'ENOTFOUND') {\n        var message = 'Inaccessible host: `' + err.hostname + '\\'. This service may not be available in the `' + err.region + '\\' region.';\n        this.response.error = AWS.util.error(new Error(message), {\n          code: 'UnknownEndpoint',\n          region: err.region,\n          hostname: err.hostname,\n          retryable: true,\n          originalError: err\n        });\n      }\n    });\n  }),\n  Logger: new SequentialExecutor().addNamedListeners(function (add) {\n    add('LOG_REQUEST', 'complete', function LOG_REQUEST(resp) {\n      var req = resp.request;\n      var logger = req.service.config.logger;\n      if (!logger) return;\n      function filterSensitiveLog(inputShape, shape) {\n        if (!shape) {\n          return shape;\n        }\n        switch (inputShape.type) {\n          case 'structure':\n            var struct = {};\n            AWS.util.each(shape, function (subShapeName, subShape) {\n              if (Object.prototype.hasOwnProperty.call(inputShape.members, subShapeName)) {\n                struct[subShapeName] = filterSensitiveLog(inputShape.members[subShapeName], subShape);\n              } else {\n                struct[subShapeName] = subShape;\n              }\n            });\n            return struct;\n          case 'list':\n            var list = [];\n            AWS.util.arrayEach(shape, function (subShape, index) {\n              list.push(filterSensitiveLog(inputShape.member, subShape));\n            });\n            return list;\n          case 'map':\n            var map = {};\n            AWS.util.each(shape, function (key, value) {\n              map[key] = filterSensitiveLog(inputShape.value, value);\n            });\n            return map;\n          default:\n            if (inputShape.isSensitive) {\n              return '***SensitiveInformation***';\n            } else {\n              return shape;\n            }\n        }\n      }\n      function buildMessage() {\n        var time = resp.request.service.getSkewCorrectedDate().getTime();\n        var delta = (time - req.startTime.getTime()) / 1000;\n        var ansi = logger.isTTY ? true : false;\n        var status = resp.httpResponse.statusCode;\n        var censoredParams = req.params;\n        if (req.service.api.operations && req.service.api.operations[req.operation] && req.service.api.operations[req.operation].input) {\n          var inputShape = req.service.api.operations[req.operation].input;\n          censoredParams = filterSensitiveLog(inputShape, req.params);\n        }\n        var params = require('util').inspect(censoredParams, true, null);\n        var message = '';\n        if (ansi) message += '\\x1B[33m';\n        message += '[AWS ' + req.service.serviceIdentifier + ' ' + status;\n        message += ' ' + delta.toString() + 's ' + resp.retryCount + ' retries]';\n        if (ansi) message += '\\x1B[0;1m';\n        message += ' ' + AWS.util.string.lowerFirst(req.operation);\n        message += '(' + params + ')';\n        if (ansi) message += '\\x1B[0m';\n        return message;\n      }\n      var line = buildMessage();\n      if (typeof logger.log === 'function') {\n        logger.log(line);\n      } else if (typeof logger.write === 'function') {\n        logger.write(line + '\\n');\n      }\n    });\n  }),\n  Json: new SequentialExecutor().addNamedListeners(function (add) {\n    var svc = require('./protocol/json');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n  Rest: new SequentialExecutor().addNamedListeners(function (add) {\n    var svc = require('./protocol/rest');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n  RestJson: new SequentialExecutor().addNamedListeners(function (add) {\n    var svc = require('./protocol/rest_json');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n  RestXml: new SequentialExecutor().addNamedListeners(function (add) {\n    var svc = require('./protocol/rest_xml');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n  Query: new SequentialExecutor().addNamedListeners(function (add) {\n    var svc = require('./protocol/query');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  })\n};","map":{"version":3,"names":["AWS","require","SequentialExecutor","DISCOVER_ENDPOINT","discoverEndpoint","EventListeners","Core","getOperationAuthtype","req","service","api","operations","operation","authtype","addNamedListeners","add","addAsync","VALIDATE_CREDENTIALS","done","signatureVersion","config","getCredentials","err","response","error","util","code","message","VALIDATE_REGION","region","isGlobalEndpoint","Error","BUILD_IDEMPOTENCY_TOKENS","idempotentMembers","length","params","copy","i","iLen","uuid","v4","VALIDATE_PARAMETERS","rules","input","validation","paramValidation","ParamValidator","validate","COMPUTE_SHA256","haltHandlersOnError","getSignerClass","Signers","V4","body","httpRequest","indexOf","headers","computeSha256","sha","SET_CONTENT_LENGTH","payloadMember","getRequestPayloadShape","undefined","string","byteLength","isStreaming","requiresLength","SET_HTTP_HOST","endpoint","host","RESTART","retryable","HttpRequest","retryCount","maxRetries","addToHead","SIGN","credentials","date","getSkewCorrectedDate","SignerClass","signer","signingName","endpointPrefix","signatureCache","setServiceClientId","_clientId","addAuthorization","signedAt","e","VALIDATE_RESPONSE","resp","successfulResponse","data","SEND","httpResponse","_abortCallback","callback","httpResp","stream","request","operationName","on","onHeaders","statusCode","statusMessage","emit","streaming","HttpClient","streamsApiVersion","hasEventOutput","onReadable","read","onData","onEnd","didCallback","progress","onSendProgress","value","onReceiveProgress","errCode","hostname","executeSend","http","getInstance","httpOptions","handleRequest","timeDiff","HTTP_HEADERS","buffer","toBuffer","buffers","numBytes","dateHeader","Date","serverTime","parse","correctClockSkew","isClockSkewed","applyClockOffset","HTTP_DATA","chunk","isNode","total","loaded","push","HTTP_DONE","concat","FINALIZE_ERROR","retryableError","INVALIDATE_CREDENTIALS","expired","EXPIRED_SIGNATURE","match","CLOCK_SKEWED","clockSkewError","REDIRECT","Endpoint","redirect","RETRY_CHECK","redirectCount","maxRedirects","retryDelay","retryDelays","RESET_RETRY_STATE","delay","willRetry","setTimeout","CorePost","extractRequestId","ENOTFOUND_ERROR","errno","originalError","Logger","LOG_REQUEST","logger","filterSensitiveLog","inputShape","shape","type","struct","each","subShapeName","subShape","Object","prototype","hasOwnProperty","call","members","list","arrayEach","index","member","map","key","isSensitive","buildMessage","time","getTime","delta","startTime","ansi","isTTY","status","censoredParams","inspect","serviceIdentifier","toString","lowerFirst","line","log","write","Json","svc","buildRequest","extractData","extractError","Rest","RestJson","RestXml","Query"],"sources":["C:/Study/6805/React/reacthtml/node_modules/aws-sdk/lib/event_listeners.js"],"sourcesContent":["var AWS = require('./core');\nvar SequentialExecutor = require('./sequential_executor');\nvar DISCOVER_ENDPOINT = require('./discover_endpoint').discoverEndpoint;\n/**\n * The namespace used to register global event listeners for request building\n * and sending.\n */\nAWS.EventListeners = {\n  /**\n   * @!attribute VALIDATE_CREDENTIALS\n   *   A request listener that validates whether the request is being\n   *   sent with credentials.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating credentials\n   *     var listener = AWS.EventListeners.Core.VALIDATE_CREDENTIALS;\n   *     request.removeListener('validate', listener);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute VALIDATE_REGION\n   *   A request listener that validates whether the region is set\n   *   for a request.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating region configuration\n   *     var listener = AWS.EventListeners.Core.VALIDATE_REGION;\n   *     request.removeListener('validate', listener);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute VALIDATE_PARAMETERS\n   *   A request listener that validates input parameters in a request.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating parameters\n   *     var listener = AWS.EventListeners.Core.VALIDATE_PARAMETERS;\n   *     request.removeListener('validate', listener);\n   *   @example Disable parameter validation globally\n   *     AWS.EventListeners.Core.removeListener('validate',\n   *       AWS.EventListeners.Core.VALIDATE_REGION);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute SEND\n   *   A request listener that initiates the HTTP connection for a\n   *   request being sent. Handles the {AWS.Request~send 'send' Request event}\n   *   @example Replacing the HTTP handler\n   *     var listener = AWS.EventListeners.Core.SEND;\n   *     request.removeListener('send', listener);\n   *     request.on('send', function(response) {\n   *       customHandler.send(response);\n   *     });\n   *   @return [Function]\n   *   @readonly\n   * @!attribute HTTP_DATA\n   *   A request listener that reads data from the HTTP connection in order\n   *   to build the response data.\n   *   Handles the {AWS.Request~httpData 'httpData' Request event}.\n   *   Remove this handler if you are overriding the 'httpData' event and\n   *   do not want extra data processing and buffering overhead.\n   *   @example Disabling default data processing\n   *     var listener = AWS.EventListeners.Core.HTTP_DATA;\n   *     request.removeListener('httpData', listener);\n   *   @return [Function]\n   *   @readonly\n   */\n  Core: {} /* doc hack */\n};\n\n/**\n * @api private\n */\nfunction getOperationAuthtype(req) {\n  if (!req.service.api.operations) {\n    return '';\n  }\n  var operation = req.service.api.operations[req.operation];\n  return operation ? operation.authtype : '';\n}\n\nAWS.EventListeners = {\n  Core: new SequentialExecutor().addNamedListeners(function(add, addAsync) {\n    addAsync('VALIDATE_CREDENTIALS', 'validate',\n        function VALIDATE_CREDENTIALS(req, done) {\n      if (!req.service.api.signatureVersion) return done(); // none\n      req.service.config.getCredentials(function(err) {\n        if (err) {\n          req.response.error = AWS.util.error(err,\n            {code: 'CredentialsError', message: 'Missing credentials in config'});\n        }\n        done();\n      });\n    });\n\n    add('VALIDATE_REGION', 'validate', function VALIDATE_REGION(req) {\n      if (!req.service.config.region && !req.service.isGlobalEndpoint) {\n        req.response.error = AWS.util.error(new Error(),\n          {code: 'ConfigError', message: 'Missing region in config'});\n      }\n    });\n\n    add('BUILD_IDEMPOTENCY_TOKENS', 'validate', function BUILD_IDEMPOTENCY_TOKENS(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      if (!operation) {\n        return;\n      }\n      var idempotentMembers = operation.idempotentMembers;\n      if (!idempotentMembers.length) {\n        return;\n      }\n      // creates a copy of params so user's param object isn't mutated\n      var params = AWS.util.copy(req.params);\n      for (var i = 0, iLen = idempotentMembers.length; i < iLen; i++) {\n        if (!params[idempotentMembers[i]]) {\n          // add the member\n          params[idempotentMembers[i]] = AWS.util.uuid.v4();\n        }\n      }\n      req.params = params;\n    });\n\n    add('VALIDATE_PARAMETERS', 'validate', function VALIDATE_PARAMETERS(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var rules = req.service.api.operations[req.operation].input;\n      var validation = req.service.config.paramValidation;\n      new AWS.ParamValidator(validation).validate(rules, req.params);\n    });\n\n    addAsync('COMPUTE_SHA256', 'afterBuild', function COMPUTE_SHA256(req, done) {\n      req.haltHandlersOnError();\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      var authtype = operation ? operation.authtype : '';\n      if (!req.service.api.signatureVersion && !authtype) return done(); // none\n      if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n        var body = req.httpRequest.body || '';\n        if (authtype.indexOf('unsigned-body') >= 0) {\n          req.httpRequest.headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n          return done();\n        }\n        AWS.util.computeSha256(body, function(err, sha) {\n          if (err) {\n            done(err);\n          }\n          else {\n            req.httpRequest.headers['X-Amz-Content-Sha256'] = sha;\n            done();\n          }\n        });\n      } else {\n        done();\n      }\n    });\n\n    add('SET_CONTENT_LENGTH', 'afterBuild', function SET_CONTENT_LENGTH(req) {\n      var authtype = getOperationAuthtype(req);\n      var payloadMember = AWS.util.getRequestPayloadShape(req);\n      if (req.httpRequest.headers['Content-Length'] === undefined) {\n        try {\n          var length = AWS.util.string.byteLength(req.httpRequest.body);\n          req.httpRequest.headers['Content-Length'] = length;\n        } catch (err) {\n          if (payloadMember && payloadMember.isStreaming) {\n            if (payloadMember.requiresLength) {\n              //streaming payload requires length(s3, glacier)\n              throw err;\n            } else if (authtype.indexOf('unsigned-body') >= 0) {\n              //unbounded streaming payload(lex, mediastore)\n              req.httpRequest.headers['Transfer-Encoding'] = 'chunked';\n              return;\n            } else {\n              throw err;\n            }\n          }\n          throw err;\n        }\n      }\n    });\n\n    add('SET_HTTP_HOST', 'afterBuild', function SET_HTTP_HOST(req) {\n      req.httpRequest.headers['Host'] = req.httpRequest.endpoint.host;\n    });\n\n    add('RESTART', 'restart', function RESTART() {\n      var err = this.response.error;\n      if (!err || !err.retryable) return;\n\n      this.httpRequest = new AWS.HttpRequest(\n        this.service.endpoint,\n        this.service.region\n      );\n\n      if (this.response.retryCount < this.service.config.maxRetries) {\n        this.response.retryCount++;\n      } else {\n        this.response.error = null;\n      }\n    });\n\n    var addToHead = true;\n    addAsync('DISCOVER_ENDPOINT', 'sign', DISCOVER_ENDPOINT, addToHead);\n\n    addAsync('SIGN', 'sign', function SIGN(req, done) {\n      var service = req.service;\n      var operations = req.service.api.operations || {};\n      var operation = operations[req.operation];\n      var authtype = operation ? operation.authtype : '';\n      if (!service.api.signatureVersion && !authtype) return done(); // none\n\n      service.config.getCredentials(function (err, credentials) {\n        if (err) {\n          req.response.error = err;\n          return done();\n        }\n\n        try {\n          var date = service.getSkewCorrectedDate();\n          var SignerClass = service.getSignerClass(req);\n          var signer = new SignerClass(req.httpRequest,\n            service.api.signingName || service.api.endpointPrefix,\n            {\n              signatureCache: service.config.signatureCache,\n              operation: operation,\n              signatureVersion: service.api.signatureVersion\n            });\n          signer.setServiceClientId(service._clientId);\n\n          // clear old authorization headers\n          delete req.httpRequest.headers['Authorization'];\n          delete req.httpRequest.headers['Date'];\n          delete req.httpRequest.headers['X-Amz-Date'];\n\n          // add new authorization\n          signer.addAuthorization(credentials, date);\n          req.signedAt = date;\n        } catch (e) {\n          req.response.error = e;\n        }\n        done();\n      });\n    });\n\n    add('VALIDATE_RESPONSE', 'validateResponse', function VALIDATE_RESPONSE(resp) {\n      if (this.service.successfulResponse(resp, this)) {\n        resp.data = {};\n        resp.error = null;\n      } else {\n        resp.data = null;\n        resp.error = AWS.util.error(new Error(),\n          {code: 'UnknownError', message: 'An unknown error occurred.'});\n      }\n    });\n\n    addAsync('SEND', 'send', function SEND(resp, done) {\n      resp.httpResponse._abortCallback = done;\n      resp.error = null;\n      resp.data = null;\n\n      function callback(httpResp) {\n        resp.httpResponse.stream = httpResp;\n        var stream = resp.request.httpRequest.stream;\n        var service = resp.request.service;\n        var api = service.api;\n        var operationName = resp.request.operation;\n        var operation = api.operations[operationName] || {};\n\n        httpResp.on('headers', function onHeaders(statusCode, headers, statusMessage) {\n          resp.request.emit(\n            'httpHeaders',\n            [statusCode, headers, resp, statusMessage]\n          );\n\n          if (!resp.httpResponse.streaming) {\n            if (AWS.HttpClient.streamsApiVersion === 2) { // streams2 API check\n              // if we detect event streams, we're going to have to\n              // return the stream immediately\n              if (operation.hasEventOutput && service.successfulResponse(resp)) {\n                // skip reading the IncomingStream\n                resp.request.emit('httpDone');\n                done();\n                return;\n              }\n\n              httpResp.on('readable', function onReadable() {\n                var data = httpResp.read();\n                if (data !== null) {\n                  resp.request.emit('httpData', [data, resp]);\n                }\n              });\n            } else { // legacy streams API\n              httpResp.on('data', function onData(data) {\n                resp.request.emit('httpData', [data, resp]);\n              });\n            }\n          }\n        });\n\n        httpResp.on('end', function onEnd() {\n          if (!stream || !stream.didCallback) {\n            if (AWS.HttpClient.streamsApiVersion === 2 && (operation.hasEventOutput && service.successfulResponse(resp))) {\n              // don't concatenate response chunks when streaming event stream data when response is successful\n              return;\n            }\n            resp.request.emit('httpDone');\n            done();\n          }\n        });\n      }\n\n      function progress(httpResp) {\n        httpResp.on('sendProgress', function onSendProgress(value) {\n          resp.request.emit('httpUploadProgress', [value, resp]);\n        });\n\n        httpResp.on('receiveProgress', function onReceiveProgress(value) {\n          resp.request.emit('httpDownloadProgress', [value, resp]);\n        });\n      }\n\n      function error(err) {\n        if (err.code !== 'RequestAbortedError') {\n          var errCode = err.code === 'TimeoutError' ? err.code : 'NetworkingError';\n          err = AWS.util.error(err, {\n            code: errCode,\n            region: resp.request.httpRequest.region,\n            hostname: resp.request.httpRequest.endpoint.hostname,\n            retryable: true\n          });\n        }\n        resp.error = err;\n        resp.request.emit('httpError', [resp.error, resp], function() {\n          done();\n        });\n      }\n\n      function executeSend() {\n        var http = AWS.HttpClient.getInstance();\n        var httpOptions = resp.request.service.config.httpOptions || {};\n        try {\n          var stream = http.handleRequest(resp.request.httpRequest, httpOptions,\n                                          callback, error);\n          progress(stream);\n        } catch (err) {\n          error(err);\n        }\n      }\n      var timeDiff = (resp.request.service.getSkewCorrectedDate() - this.signedAt) / 1000;\n      if (timeDiff >= 60 * 10) { // if we signed 10min ago, re-sign\n        this.emit('sign', [this], function(err) {\n          if (err) done(err);\n          else executeSend();\n        });\n      } else {\n        executeSend();\n      }\n    });\n\n    add('HTTP_HEADERS', 'httpHeaders',\n        function HTTP_HEADERS(statusCode, headers, resp, statusMessage) {\n      resp.httpResponse.statusCode = statusCode;\n      resp.httpResponse.statusMessage = statusMessage;\n      resp.httpResponse.headers = headers;\n      resp.httpResponse.body = AWS.util.buffer.toBuffer('');\n      resp.httpResponse.buffers = [];\n      resp.httpResponse.numBytes = 0;\n      var dateHeader = headers.date || headers.Date;\n      var service = resp.request.service;\n      if (dateHeader) {\n        var serverTime = Date.parse(dateHeader);\n        if (service.config.correctClockSkew\n            && service.isClockSkewed(serverTime)) {\n          service.applyClockOffset(serverTime);\n        }\n      }\n    });\n\n    add('HTTP_DATA', 'httpData', function HTTP_DATA(chunk, resp) {\n      if (chunk) {\n        if (AWS.util.isNode()) {\n          resp.httpResponse.numBytes += chunk.length;\n\n          var total = resp.httpResponse.headers['content-length'];\n          var progress = { loaded: resp.httpResponse.numBytes, total: total };\n          resp.request.emit('httpDownloadProgress', [progress, resp]);\n        }\n\n        resp.httpResponse.buffers.push(AWS.util.buffer.toBuffer(chunk));\n      }\n    });\n\n    add('HTTP_DONE', 'httpDone', function HTTP_DONE(resp) {\n      // convert buffers array into single buffer\n      if (resp.httpResponse.buffers && resp.httpResponse.buffers.length > 0) {\n        var body = AWS.util.buffer.concat(resp.httpResponse.buffers);\n        resp.httpResponse.body = body;\n      }\n      delete resp.httpResponse.numBytes;\n      delete resp.httpResponse.buffers;\n    });\n\n    add('FINALIZE_ERROR', 'retry', function FINALIZE_ERROR(resp) {\n      if (resp.httpResponse.statusCode) {\n        resp.error.statusCode = resp.httpResponse.statusCode;\n        if (resp.error.retryable === undefined) {\n          resp.error.retryable = this.service.retryableError(resp.error, this);\n        }\n      }\n    });\n\n    add('INVALIDATE_CREDENTIALS', 'retry', function INVALIDATE_CREDENTIALS(resp) {\n      if (!resp.error) return;\n      switch (resp.error.code) {\n        case 'RequestExpired': // EC2 only\n        case 'ExpiredTokenException':\n        case 'ExpiredToken':\n          resp.error.retryable = true;\n          resp.request.service.config.credentials.expired = true;\n      }\n    });\n\n    add('EXPIRED_SIGNATURE', 'retry', function EXPIRED_SIGNATURE(resp) {\n      var err = resp.error;\n      if (!err) return;\n      if (typeof err.code === 'string' && typeof err.message === 'string') {\n        if (err.code.match(/Signature/) && err.message.match(/expired/)) {\n          resp.error.retryable = true;\n        }\n      }\n    });\n\n    add('CLOCK_SKEWED', 'retry', function CLOCK_SKEWED(resp) {\n      if (!resp.error) return;\n      if (this.service.clockSkewError(resp.error)\n          && this.service.config.correctClockSkew) {\n        resp.error.retryable = true;\n      }\n    });\n\n    add('REDIRECT', 'retry', function REDIRECT(resp) {\n      if (resp.error && resp.error.statusCode >= 300 &&\n          resp.error.statusCode < 400 && resp.httpResponse.headers['location']) {\n        this.httpRequest.endpoint =\n          new AWS.Endpoint(resp.httpResponse.headers['location']);\n        this.httpRequest.headers['Host'] = this.httpRequest.endpoint.host;\n        resp.error.redirect = true;\n        resp.error.retryable = true;\n      }\n    });\n\n    add('RETRY_CHECK', 'retry', function RETRY_CHECK(resp) {\n      if (resp.error) {\n        if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n          resp.error.retryDelay = 0;\n        } else if (resp.retryCount < resp.maxRetries) {\n          resp.error.retryDelay = this.service.retryDelays(resp.retryCount) || 0;\n        }\n      }\n    });\n\n    addAsync('RESET_RETRY_STATE', 'afterRetry', function RESET_RETRY_STATE(resp, done) {\n      var delay, willRetry = false;\n\n      if (resp.error) {\n        delay = resp.error.retryDelay || 0;\n        if (resp.error.retryable && resp.retryCount < resp.maxRetries) {\n          resp.retryCount++;\n          willRetry = true;\n        } else if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n          resp.redirectCount++;\n          willRetry = true;\n        }\n      }\n\n      if (willRetry) {\n        resp.error = null;\n        setTimeout(done, delay);\n      } else {\n        done();\n      }\n    });\n  }),\n\n  CorePost: new SequentialExecutor().addNamedListeners(function(add) {\n    add('EXTRACT_REQUEST_ID', 'extractData', AWS.util.extractRequestId);\n    add('EXTRACT_REQUEST_ID', 'extractError', AWS.util.extractRequestId);\n\n    add('ENOTFOUND_ERROR', 'httpError', function ENOTFOUND_ERROR(err) {\n      if (err.code === 'NetworkingError' && err.errno === 'ENOTFOUND') {\n        var message = 'Inaccessible host: `' + err.hostname +\n          '\\'. This service may not be available in the `' + err.region +\n          '\\' region.';\n        this.response.error = AWS.util.error(new Error(message), {\n          code: 'UnknownEndpoint',\n          region: err.region,\n          hostname: err.hostname,\n          retryable: true,\n          originalError: err\n        });\n      }\n    });\n  }),\n\n  Logger: new SequentialExecutor().addNamedListeners(function(add) {\n    add('LOG_REQUEST', 'complete', function LOG_REQUEST(resp) {\n      var req = resp.request;\n      var logger = req.service.config.logger;\n      if (!logger) return;\n      function filterSensitiveLog(inputShape, shape) {\n        if (!shape) {\n          return shape;\n        }\n        switch (inputShape.type) {\n          case 'structure':\n            var struct = {};\n            AWS.util.each(shape, function(subShapeName, subShape) {\n              if (Object.prototype.hasOwnProperty.call(inputShape.members, subShapeName)) {\n                struct[subShapeName] = filterSensitiveLog(inputShape.members[subShapeName], subShape);\n              } else {\n                struct[subShapeName] = subShape;\n              }\n            });\n            return struct;\n          case 'list':\n            var list = [];\n            AWS.util.arrayEach(shape, function(subShape, index) {\n              list.push(filterSensitiveLog(inputShape.member, subShape));\n            });\n            return list;\n          case 'map':\n            var map = {};\n            AWS.util.each(shape, function(key, value) {\n              map[key] = filterSensitiveLog(inputShape.value, value);\n            });\n            return map;\n          default:\n            if (inputShape.isSensitive) {\n              return '***SensitiveInformation***';\n            } else {\n              return shape;\n            }\n        }\n      }\n\n      function buildMessage() {\n        var time = resp.request.service.getSkewCorrectedDate().getTime();\n        var delta = (time - req.startTime.getTime()) / 1000;\n        var ansi = logger.isTTY ? true : false;\n        var status = resp.httpResponse.statusCode;\n        var censoredParams = req.params;\n        if (\n          req.service.api.operations &&\n              req.service.api.operations[req.operation] &&\n              req.service.api.operations[req.operation].input\n        ) {\n          var inputShape = req.service.api.operations[req.operation].input;\n          censoredParams = filterSensitiveLog(inputShape, req.params);\n        }\n        var params = require('util').inspect(censoredParams, true, null);\n        var message = '';\n        if (ansi) message += '\\x1B[33m';\n        message += '[AWS ' + req.service.serviceIdentifier + ' ' + status;\n        message += ' ' + delta.toString() + 's ' + resp.retryCount + ' retries]';\n        if (ansi) message += '\\x1B[0;1m';\n        message += ' ' + AWS.util.string.lowerFirst(req.operation);\n        message += '(' + params + ')';\n        if (ansi) message += '\\x1B[0m';\n        return message;\n      }\n\n      var line = buildMessage();\n      if (typeof logger.log === 'function') {\n        logger.log(line);\n      } else if (typeof logger.write === 'function') {\n        logger.write(line + '\\n');\n      }\n    });\n  }),\n\n  Json: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/json');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  Rest: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/rest');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  RestJson: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/rest_json');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  RestXml: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/rest_xml');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  Query: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/query');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  })\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}